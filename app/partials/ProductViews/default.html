<section id="451_area_prod_desc" class="container product-view-default">
    <figure>
        <img id="451_img_prod_lg" ng-src="{{LineItem.Variant.LargeImageFile.Url || LineItem.Product.LargeImageFile.Url}}" ng-show="LineItem.Variant.LargeImageFile.Url || LineItem.Product.LargeImageFile.Url">
    </figure>
    <div class="panel panel-default col-md-3 col-md-offset-1 col-md-push-8">
        <div class="panel-heading">
            <h3 class="panel-title">
                {{LineItem.Product.Name}}
            </h3>
        </div>
        <form name="addToOrderForm" ng-show="allowAddToOrder">
            <div class="panel-body">
                <h5>
                    <span class="text-info">
                        ID
                     </span>
                    {{LineItem.Product.ExternalID}}
                </h5>
                <priceScheduleTable ps='LineItem.PriceSchedule' p='LineItem.Product'/>
                <table id="451_list_vspec" border=1 ng-show="true">
                    <tr ng-repeat="s in LineItem.Specs | onproperty:[{Property: 'CanSetForLineItem', Value: true}, {Property: 'DefinesVariant', Value: true}]">
                        <td>
                            {{s.Name}}<span ng-show="s.Required" style="color:red"> *</span>
                        </td>
                        <td>
                            {{s.Prefix}}
                            <vspecfield changed="specChanged" s="s">
                            </vspecfield>{{s.Suffix}}
                        </td>
                    </tr>
                </table>
            </div>
            <div class="panel-footer">
                <p class="alert alert-danger" ng-show="quantityError">
                    {{quantityError}}
                </p>
                <p class="alert alert-warning" ng-show="addToOrderForm.$invalid" ng-hide="quantityError">
                    Please correct all errors to submit to cart.
                </p>
                <div style="float: left;">
                    <span class="text-info">
                        QTY
                    </span>
                    <quantityfield lineitem="LineItem" error="quantityError" class="quantity" />
                   <span class="text-success">
                       {{LineItem.LineTotal | currency}}
                   </span>
                </div>
                <div style=" display: inline;float: right;">
                    <button type="button" id="451_btn_orderadd" ng-disabled="addToOrderForm.$invalid" ng-click="addToOrder(LineItem)" class="btn btn-primary">
                        {{addToOrderText}}
                    </button>
                </div>
                <p class="alert alert-danger" ng-show="LineItem.PriceSchedule.MinQuantity > 1">
                    min: {{LineItem.PriceSchedule.MinQuantity}}
                </p>
                <p class="alert alert-danger" ng-show="LineItem.PriceSchedule.MaxQuantity">
                    max: {{LineItem.PriceSchedule.MaxQuantity}}
                </p>
            </div>
        </form>
    </div>
    <div class="panel product-view-default-toggle-panel panel-primary col-md-8 col-md-pull-4">
        <div class="panel-heading">
            <!--- TODO specgroups panel-title should only show if spec groups data exist --->
            <h3 ng-click="selected=1" ng-class="{'panel-selected':selected == 1}" class="panel-title">
                <span class="icon">
                    <i ng-class="{'icon-caret-up':selected == 1}"></i>
                </span>
                Info
            </h3>
            <h3 ng-click="selected=2" ng-class="{'panel-selected':selected == 2}" class="panel-title">
                <span class="icon">
                    <i ng-class="{'icon-caret-up':selected == 2}"></i>
                </span>
                Spec
            </h3>
        </div>
        <div class="panel-body">
            <div ng-hide="selected == 2">
                <div ng-show="LineItem.Product.Description">
                    <p class="text-info">
                        Description:
                    </p>
                    <p ng-bind-html="LineItem.Product.Description" />
                </div>
                <div ng-show="LineItem.Variant.Description">
                    <p class="text-info">
                        Variant Description:
                    </p>
                    <p ng-bind-html="LineItem.Variant.Description"/>
                </div>
                <div ng-show="LineItem.Variant.ExternalID">
                    <p class="text-info">
                        Variant ID:
                    </p>
                    {{LineItem.Variant.ExternalID}}
                </div>
                <div ng-show="inventoryDisplay(LineItem.Product, LineItem.Variant)">
                    <p class="text-info">
                        Available Inventory:
                    </p>
                    {{inventoryDisplay(LineItem.Product, LineItem.Variant) }}
                </div>
                <div ng-show="LineItem.Product.Variants.length > 1 && !LineItem.Variant">
                    <h4>
                        Please select from the following:
                    </h4>
                    <div>
                        <table border=1 class="451_list_vars">
                            <tr>
                                <td>
                                    Variant ID
                                </td>
                                <td>
                                    Description
                                </td>
                                <td ng-show="LineItem.Product.DisplayInventory && LineItem.Product.IsVariantLevelInventory">
                                    Available Quantity
                                </td>
                                <td>
                                    Order Quantity
                                </td>
                            </tr>
                            <tr ng-repeat="v in LineItem.Product.Variants">
                                <td>
                                    <a href=#/product/{{LineItem.Product.ViewName}}/{{LineItem.Product.InteropID}}/{{v.InteropID}}>{{v.ExternalID}}</a>
                                </td>
                                <td>
                                    {{v.Description}}
                                </td>
                                <td ng-show="LineItem.Product.DisplayInventory && LineItem.Product.IsVariantLevelInventory">
                                    {{v.QuantityAvailable}}
                                </td>
                                <td>
                                    Order Quantity
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            <div ng-show="selected == 2">
                <staticspecstable specgroups="StaticSpecGroups"/>
            </div>
        </div>
    </div>
    <div class="panel panel-default product-view-default-related col-md-8 col-md-pull-4">
        <div class="panel-heading">
            <h3 class="panel-title">Related Products</h3>
        </div>
        <div class="panel-body">
            <p>
                R.1
            </p>
        </div>
        <div class="panel-body">
            <p>
                R.2
            </p>
        </div>
        <div class="panel-body">
            <p>
                R.3
            </p>
        </div>
    </div>
</section>
