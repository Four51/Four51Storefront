<section class="container order-search-view">
    <div class="panel panel-default" ng-if="!hasStandardTypes && !hasReplenishmentTypes && !hasPriceRequestTypes">
        <div class="panel-heading">
            <h3 class="panel-title">Orders</h3>
        </div>
        <div class="panel-body">
            <p class="alert alert-warning">You have no orders yet!</p>
        </div>
        <div class="panel-footer">
            <button type="button" class="btn btn-primary" ng-click="continueShopping()">Continue Shopping</button>
        </div>
    </div>
    <nav class="nav nav-cat-search" ng-if="hasStandardTypes || hasReplenishmentTypes || hasPriceRequestTypes">
        <hr />
        <ul>
            <li class="text-nav">Orders</li>
            <li class="pull-right" ng-click="toggle = !toggle">
                <i class="fa fa-search" rel="tooltip" title="Search Orders"></i>
            </li>
        </ul>
        <hr />
    </nav>
    <div ng-show="displayOrders" ng-hide="toggle">
        <!--- TODO table needs to redone as Bootstrap responsive layout, see cartView.html for example --->
        <table class="table table-striped table-hover table-bordered" ng-show="orders">
            <caption ng-show="orderSearchStat">{{orderSearchStat.Type}} - {{orderSearchStat.Status}}</caption>
            <thead>
            <tr>
                <td>ID</td><td>Type</td><td>Status</td><td>Submitted By</td><td>DateCreated/Submitted</td><td>Total</td>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="order in orders">
                <td><a ng-href="#/order/{{order.ID}}">{{order.ExternalID}}</a></td>
                <td>{{order.Type}}</td>
                <td>{{order.Status}}</td>
                <td>{{order.FromUserFirstName + ' ' + order.FromUserLastName}}</td>
                <td>{{order.DateSubmitted || order.DateCreated | date:'short'}}</td>
                <td>{{order.Total | currency:"$"}}</td>
            </tr>
            </tbody>
        </table>
    </div>
    <!--- below panels are fine and hide/show as intended --->
    <div class="order-search-toggle" ng-show="toggle" >
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">Search Orders</h3>
            </div>
            <div class="panel-body">
                <input type="text" ng-model="criteria.OrderID" placeholder="Order ID" /><br />
                <input type="text" ng-model="criteria.ShippingAddress" placeholder="Shipping Address" /><br />
                <input type="text" ui-date ng-model="criteria.DateRangeFrom" placeholder="From:" /><input type="text" ui-date ng-model="criteria.DateRangeTo" placeholder="To:" /><br />
                <input type="text" ng-model="criteria.LastN" placeholder="Last n Orders:" />
            </div>
            <div class="panel-footer">
                <input type="submit" class="btn btn-primary" value="Search" ng-click="OrderSearch($event, criteria); toggle = !toggle;" />
            </div>
        </div>
    </div>
    <div class="order-types" ng-show="!toggle">
        <div class="panel panel-default" ng-show="hasStandardTypes">
            <div class="panel-heading">
                <h3 class="panel-title">Standard Orders</h3>
            </div>
            <div class="panel-body">
                <ul>
                    <li ng-repeat="criteria in OrderSearchCriteria | filter:{Type:'Standard'}" ng-show="criteria.Count">
                        <a ng-href="#" ng-click="OrderSearch($event,{{criteria}})">{{criteria.Status}} <span class="badge">{{criteria.Count}}</span></a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="panel panel-default" ng-show="hasReplenishmentTypes">
            <div class="panel-heading">
                <h3 class="panel-title">Replenishment Orders<h3>
            </div>
            <div class="panel-body">
                <ul>
                    <li ng-repeat="criteria in OrderSearchCriteria | filter:{Type:'Replenishment'}" ng-show="criteria.Count">
                        <a ng-href="#" ng-click="OrderSearch($event,{{criteria}})">{{criteria.Status}} <span class="badge" >{{criteria.Count}}</span></a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="panel panel-default" ng-show="hasPriceRequestTypes">
            <div class="panel-heading">
                <h3 class="panel-title">Price Request</h3>
            </div>
            <div class="panel-body">
                <ul>
                    <li ng-repeat="criteria in OrderSearchCriteria | filter:{Type:'PriceRequest'}" ng-show="criteria.Count">
                        <a ng-href="#" ng-click="OrderSearch($event,{{criteria}})">{{criteria.Status}} <span clas="badge">{{criteria.Count}}</span></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>